<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>PSET7 D3 Visualization Webpage</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.1.1/d3.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,500" rel="stylesheet">
        <link href="offcanvas.css" rel="stylesheet">
		</head>
		<body>
        <main>
            
            <section class="container">
                <div class="row jumbotron jumbotron-fluid">
                    <h1>Visualizing Agricultural Land</h1>
                    <hr>
                </div>
                <div class="row">
                    <div class="col-md-5">
                        <p class="content">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in dolor placerat, volutpat augue sodales, congue dui. Nulla ac efficitur felis, sit amet sodales leo. Curabitur nunc ante, tempor sed porta vel, elementum aliquet odio. Mauris id laoreet velit. Vestibulum quis neque ultricies, pharetra dui ut, cursus tortor. Donec ultrices est in nunc fringilla vehicula. Praesent vitae risus porta, rhoncus neque ac, auctor nisi. Aenean feugiat quis odio sit amet tincidunt. Aenean iaculis mollis orci, nec posuere arcu condimentum vitae. Vivamus sem arcu, faucibus a quam sed, ornare viverra risus. Aliquam tristique magna quis ipsum rhoncus, sit amet venenatis lacus tempus. Sed semper urna venenatis rutrum interdum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                        </p>
                        <br>
                        <div class="border border-dark">
                            <div class="box">
                                <b>Big Data, Visualization, and Society</b>
                                <br>
                                <br>
                                Course: <b>11.154</b>
                                <br>
                                Assignment: <b>PSET7-D3 Visualization Webpage</b>
                                <br>
                                Author: <b>Wei-En Wang</b>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div id="viz"></div>
                        <i class="cite">Data Source: World Bank</i>
                    </div>
                </div>
            </section>
            <br>
            <br>
        </main>
		<script type="text/javascript">
            const agriculturedata = [
                ["Brazil", 33.9],
                ["Canada", 6.9],
                ["Costa Rica", 34.5],
                ["Denmark", 62],
                ["Fiji", 23.3],
                ["France", 52.4],
                ["Greenland", .6],
                ["Italy", 43.2],
                ["Mali",33.8],
                ["Netherlands",53.3]
            ];

			const width = 600;
			const height = 500;
            const marginLeft = 100;
            const marginTop = 50;
            const barHeight = 30;
            const widthMultiplier = 6;
            const gap = 5;
            const opacity = 0.7;

            // define svg
			const svg = d3.select("#viz")
                .append("svg")
                .attr("viewBox", [0, 0, width, height]);
			
            // add rectangle bars
            svg.append("g")
                .attr("class", "rect-bars")
            .selectAll("rect")
                .data(agriculturedata)
                .enter()
                .append("rect")
                    .attr("y", (d, i) => i * (barHeight + gap) + marginTop)
                    .attr("x", marginLeft)
                    .attr("width", d => d[1] * widthMultiplier)
                    .attr("height", barHeight)
                    .attr("fill", "green")
                    .attr("opacity", opacity);

            svg.append("text")
                .attr("class", "title-styling")
                .attr("y", marginTop - barHeight/2)
                .attr("x", marginLeft)
                .attr("font-family", "Open Sans")
                .attr("font-size", "18px")
                .attr("font-weight", 500)
                .text("Proportion of Agricultural Land in 2016");

            svg.append("g")
                .attr("class", "text-styling")
                .selectAll("text")
                .data(agriculturedata)
                .enter()
                .append("text")
                    .attr("y", (d, i) => i * (barHeight + gap) + marginTop+barHeight/2+gap)
                    .attr("x", marginLeft-gap)
                    .attr("font-family", "Open Sans")
                    .attr("font-size", "14px")
                    .attr("font-weight", 300)
                    .attr("text-anchor", "end")
                    .text(d => d[0]);

            svg.append("g")
                .attr("class", "label-styling")
                .selectAll("text")
                .data(agriculturedata)
                .enter()
                .append("text")
                    .attr("y", (d, i) => i * (barHeight + gap) + marginTop+barHeight/2+gap)
                    .attr("x", d => d[1] * widthMultiplier+marginLeft+gap)
                    .attr("font-family", "Open Sans")
                    .attr("font-size", "14px")
                    .attr("font-weight", 300)
                    .attr("text-anchor", "left")
                    .text(d => d[1]+"%");
		</script>
	</body>
</html>